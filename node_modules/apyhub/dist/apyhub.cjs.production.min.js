"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("cross-fetch"),r=t(e),n=t(require("form-data")),a=require("fs"),o=require("path");function u(){u=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(t){p=function(t,e,r){return t[e]=r}}function c(t,e,r,a){var o=Object.create((e&&e.prototype instanceof h?e:h).prototype),u=new L(a||[]);return n(o,"_invoke",{value:k(t,r,u)}),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function h(){}function m(){}function d(){}var y={};p(y,o,(function(){return this}));var v=Object.getPrototypeOf,x=v&&v(v(T([])));x&&x!==e&&r.call(x,o)&&(y=x);var w=d.prototype=h.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var a;n(this,"_invoke",{value:function(n,o){function u(){return new e((function(a,u){!function n(a,o,u,i){var s=l(t[a],t,o);if("throw"!==s.type){var p=s.arg,c=p.value;return c&&"object"==typeof c&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,u,i)}),(function(t){n("throw",t,u,i)})):e.resolve(c).then((function(t){p.value=t,u(p)}),(function(t){return n("throw",t,u,i)}))}i(s.arg)}(n,o,a,u)}))}return a=a?a.then(u,u):u()}})}function k(t,e,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return{value:void 0,done:!0}}for(r.method=a,r.arg=o;;){var u=r.delegate;if(u){var i=F(u,r);if(i){if(i===f)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function F(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,F(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=l(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,f;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function q(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(q,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:P}}function P(){return{value:void 0,done:!0}}return m.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:m,configurable:!0}),m.displayName=p(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,p(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),p(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var u=new b(c(e,r,n,a),o);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},g(w),p(w,s,"Generator"),p(w,o,(function(){return this})),p(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=T,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return u.type="throw",u.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(i&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;_(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:T(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function i(t,e,r,n,a,o,u){try{var i=t[o](u),s=i.value}catch(t){return void r(t)}i.done?e(s):Promise.resolve(s).then(n,a)}function s(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function u(t){i(o,n,a,u,s,"next",t)}function s(t){i(o,n,a,u,s,"throw",t)}u(void 0)}))}}function p(){return(p=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l=function(){function t(t,e){var r,n;this.baseUrl="https://api.apyhub.com",this.headers="string"==typeof t?{"apy-token":t}:"object"==typeof t&&t.username&&t.password&&{Authorization:"Basic "+Buffer.from(t.username+":"+t.password).toString("base64")},this.debug=null!=(r=null==e?void 0:e.debug)&&r,this.requestQueue=[],this.rateLimit=null!=(n=null==e?void 0:e.rateLimit)?n:1,this.rateLimitPeriod=1e3,this.rateLimitTimer=null,this.requestPromises=[]}var a=t.prototype;return a.debugRequest=function(t,r,n){var a=new e.Request(r,{method:t,headers:this.headers,body:n});console.log(a)},a.request=function(){var t=s(u().mark((function t(e,r,n,a){var o,i,s=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===a&&(a={}),this.headers["apy-token"]||this.headers.Authorization){t.next=3;break}throw new Error("Basic Authorization or Token is required");case 3:if(o=p({},this.headers,a.headers),this.debug&&this.debugRequest(e,r,n),this.requestQueue.push({method:e,url:r,data:n,headers:o}),i=new Promise((function(t){s.requestPromises.push(t)})),!this.rateLimitTimer){t.next=11;break}return t.next=10,i;case 10:return t.abrupt("return",t.sent);case 11:return this.startRateLimiter(),t.next=14,i;case 14:return t.abrupt("return",t.sent);case 15:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),a.startRateLimiter=function(){var t=this;this.rateLimitTimer=setTimeout((function(){t.rateLimitTimer=null,t.processRequestQueue()}),this.rateLimitPeriod)},a.processRequestQueue=function(){var t=s(u().mark((function t(){var e,a,o,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.requestQueue.splice(0,this.rateLimit),a=0;case 2:if(!(a<e.length)){t.next=31;break}o=e[a],t.prev=4,i=void 0,t.t0=o.method,t.next="get"===t.t0?9:"post"===t.t0?13:17;break;case 9:return t.next=11,r(o.url,{method:"GET",headers:o.headers});case 11:return i=t.sent,t.abrupt("break",17);case 13:return t.next=15,r(o.url,{method:"POST",headers:o.headers,body:o.data instanceof n?o.data:JSON.stringify(o.data)});case 15:return i=t.sent,t.abrupt("break",17);case 17:return t.t1=this.requestPromises,t.t2=a,t.next=21,this.handleResponse(i);case 21:t.t3=t.sent,t.t1[t.t2].call(t.t1,t.t3),t.next=28;break;case 25:t.prev=25,t.t4=t.catch(4),this.requestPromises[a](Promise.reject(t.t4));case 28:a++,t.next=2;break;case 31:this.requestPromises=[],this.requestQueue.length>0&&this.startRateLimiter();case 33:case"end":return t.stop()}}),t,this,[[4,25]])})));return function(){return t.apply(this,arguments)}}(),a.handleResponse=function(){var t=s(u().mark((function t(e){var r,n,a,o,i,p;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.debug&&console.log(e),e.ok){t.next=7;break}return t.next=4,e.text();case 4:throw new Error(e.status+": "+t.sent);case 7:n=null!=(r=e.headers.get("Content-Type"))?r:"",a=new Set(["image/png","image/jpeg","application/zip","application/pdf"]),o=function(){var t=s(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.blob();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=s(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.text();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=s(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.t0=!0,t.next=t.t0===n.includes("text/plain")||t.t0===n.includes("text/html")?15:18;break;case 15:return t.next=17,i(e);case 17:return t.abrupt("return",t.sent);case 18:if(!a.has(n)){t.next=24;break}return t.next=21,o(e);case 21:t.t1=t.sent,t.next=27;break;case 24:return t.next=26,p(e);case 26:t.t1=t.sent;case 27:return t.abrupt("return",t.t1);case 28:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t}(),f=null;function h(t,e){if(!f){if(!t)throw new Error("Basic Authorization or Token is required");f=new l(t,e)}return f}function m(t){return d.apply(this,arguments)}function d(){return(d=s(u().mark((function t(e){var r,n,a,o,i,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.source,n=e.target,o=void 0!==(a=e.unicodeNormalized)&&a,i=h(),s="https://api.apyhub.com/search/text/fuzzy?unicode-normalized="+o.toString(),r&&n){t.next=5;break}return t.abrupt("return",{data:[]});case 5:return t.next=7,i.request("post",s,{source:r,target:n},{headers:{"Content-Type":"application/json"}});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var y={__proto__:null,fuzzy:m},v=function(t){var e=Object.entries(t).filter((function(t){return!t[1]}));if(e.length>0){var r="Missing parameters: "+e.map((function(t){return t[0]})).join(", ");throw new Error(r)}},x=function(t,e){var r="string"==typeof e?[e]:e,n=Object.entries(t).filter((function(t){var e=t[1];return"string"!=typeof e||!r.includes(e)}));if(n.length>0){var a="Invalid parameters: "+n.map((function(t){return t[0]})).join(", ")+". \nSupported values are: "+r.join(", ");throw new Error(a)}};function w(t){return g.apply(this,arguments)}function g(){return(g=s(u().mark((function t(e){var r,n,a,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.email,n=e.checkType,a=h(),v({email:r,checkType:n}),x({checkType:n},["dns","academic"]),o="https://api.apyhub.com/validate/email/"+n,t.next=7,a.request("post",o,{email:r});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(t){return k.apply(this,arguments)}function k(){return(k=s(u().mark((function t(e){var r,n,a,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.postcode,n=e.countryCode,a=h(),v({postcode:r,countryCode:n}),x({countryCode:n.toLowerCase()},["in","uk"]),o="https://api.apyhub.com/validate/postcodes/"+n.toLowerCase(),t.next=7,a.request("post",o,{postcode:r});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(){return(F=s(u().mark((function t(e){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=h(),v({vat:e}),t.next=5,r.request("post","https://api.apyhub.com/validate/vat",{vat:e});case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var q={__proto__:null,email:w,postcode:b,vat:function(t){return F.apply(this,arguments)}};function _(t,e){var r,u=new n;("string"==typeof t||t instanceof Buffer)&&(t=[t]);for(var i,s=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return c(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,void 0):void 0}}(t))){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);!(i=s()).done;){var p=i.value;if("string"==typeof p){var l=o.resolve(p),f=a.readFileSync(l);u.append(e,f,{contentType:"application/octet-stream",filename:o.basename(l)})}else u.append(e,p,{contentType:"application/octet-stream",filename:"file."+(r=p,"%PDF"===r.slice(0,4).toString()?"pdf":"PK"===r.slice(0,2).toString()?"docx":"PK"===r.slice(0,2).toString()?"pptx":"PK"===r.slice(0,2).toString()?"xlsx":"<html"===r.slice(0,5).toString()?"html":"---"===r.slice(0,3).toString()?"md":"BM"===r.slice(0,2).toString()||"GIF"===r.slice(0,3).toString()||"PNG"===r.slice(0,3).toString()||"PNG"===r.slice(0,4).toString()||"ÿØÿà"===r.slice(0,4).toString()||"ÿØÿá"===r.slice(0,4).toString()?"jpg":"ID"===r.slice(0,4).toString()?"csv":null)})}return u}function L(t){var e=o.resolve(t),r=a.readFileSync(e);return Buffer.from(r)}function T(t,e,r){return"file"===e&&"file"===r?t+"/file":"file"===e&&"url"===r?t+"/file/url"+("resize"===t?"s":""):"url"===e&&"file"===r?t+"/url/file":"url"===e&&"url"===r?t+"/file-urls":""}function P(t){return t instanceof Buffer?"file":t.match(/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/)?"url":"file"}function E(t){return S.apply(this,arguments)}function S(){return(S=s(u().mark((function t(e){var r,n,a,o,i,s,p,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.input,n=e.responseFormat,a=e.height,o=e.width,i=e.output,s=h(),v({input:r,responseFormat:n,height:a,width:o}),x({responseFormat:n},["file","url"]),p=P(r),c="https://api.apyhub.com/processor/image/"+T("crop",p,n)+"?output="+(null!=i?i:"output.png")+"&height="+a+"&width="+o,t.next=8,s.request("post",c,"file"===p?_(r,"image"):{url:r});case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(t){return z.apply(this,arguments)}function z(){return(z=s(u().mark((function t(e){var r,n,a,o,i,s,p,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.input,n=e.responseFormat,a=e.height,o=e.width,i=e.output,s=h(),v({input:r,responseFormat:n,height:a,width:o}),x({responseFormat:n},["file","url"]),p=P(r),c="https://api.apyhub.com/processor/image/"+T("resize",p,n)+"?output="+(null!=i?i:"output.png")+"&height="+a+"&width="+o,t.next=8,s.request("post",c,"file"===p?_(r,"image"):{url:r});case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(t){return B.apply(this,arguments)}function B(){return(B=s(u().mark((function t(e){var r,n,a,o,i,s,p;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.input,n=e.responseFormat,a=e.quality,o=e.output,i=h(),v({input:r,responseFormat:n,quality:a}),x({responseFormat:n},["file","url"]),s=P(r),p="https://api.apyhub.com/processor/image/"+T("compress",s,n)+"?output="+(null!=o?o:"output.png")+"&quality="+a,t.next=8,i.request("post",p,"file"===s?_(r,"image"):{url:r});case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(t){return C.apply(this,arguments)}function C(){return(C=s(u().mark((function t(e){var r,a,o,i,s,p,c,l;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.input,a=e.watermark,o=e.responseFormat,i=e.output,s=h(),v({input:r,watermark:a,responseFormat:o}),x({responseFormat:o},["file","url"]),p=P(r),c="https://api.apyhub.com/processor/image/"+T("watermark",p,o)+"?output="+(null!=i?i:"output.png"),l=function(){var t=new n;return t.append("image",r instanceof Buffer?r:L(r),{filename:"image.png",contentType:"application/octet-stream"}),t.append("watermark",a instanceof Buffer?a:L(a),{filename:"watermark.png",contentType:"application/octet-stream"}),t},t.next=9,s.request("post",c,"file"===p?l():{imageUrl:r,watermarkUrl:a});case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var N={__proto__:null,crop:E,resize:j,watermark:A,compress:O};function G(t){return R.apply(this,arguments)}function R(){return(R=s(u().mark((function t(e){var r,n,a,o,i,s,p,c,l,f,m;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.responseFormat,n=e.output,a=e.input,o=e.password,i=h(),v({responseFormat:r,input:a}),x({responseFormat:r},["file","url"]),s=o?"secure-archive":"archive",p="file"===r?"archive-file":"archive-url",c="file"===P(a[0])?"files":"file-urls",l="\n    https://api.apyhub.com/generate/"+s+"/"+c+"/"+p+"?output="+(null!=n?n:"output.zip"),f=function(){var t=_(a,"files");return o&&t.append("password",o),t},m="file-urls"===c?{urls:a,password:null!=o?o:void 0}:f(),t.next=12,i.request("post",l,m);case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(t){return M.apply(this,arguments)}function M(){return(M=s(u().mark((function t(e){var r,n,a,o,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.input,n=e.responseFormat,a=e.output,o=h(),v({input:r,responseFormat:n}),x({responseFormat:n},["file","url"]),i="https://api.apyhub.com/generate/barcode/"+n+"?output="+(null!=a?a:"output.png"),t.next=7,o.request("post",i,{content:r});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function U(t){return Q.apply(this,arguments)}function Q(){return(Q=s(u().mark((function t(e){var r,n,a,o,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.input,n=e.responseFormat,a=e.output,o=h(),v({input:r,responseFormat:n}),x({responseFormat:n},["file","url"]),i="https://api.apyhub.com/generate/qr-code/"+n+"?output="+(null!=a?a:"output.png"),t.next=7,o.request("post",i,{content:r});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(t){return D.apply(this,arguments)}function D(){return(D=s(u().mark((function t(e){var r,n,a,o,i,s,p;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.input,n=e.output,a=e.delay,o=e.quality,i=e.responseFormat,s=h(),v({input:r,responseFormat:i}),x({responseFormat:i},["file","url"]),o&&x({quality:null==o?void 0:o.toString()},[1,2,3,4,5].map((function(t){return t.toString()}))),p="\n        https://api.apyhub.com/generate/screenshot/webpage/image-"+i+"?output="+(null!=n?n:"output.png")+"&delay="+(null!=a?a:3)+"&quality="+(null!=o?o:5)+"&url="+r,t.next=8,s.request("get",p);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function W(t){return K.apply(this,arguments)}function K(){return(K=s(u().mark((function t(e){var r,n,a,o,i,s,c,l,f;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.responseFormat,n=e.chartType,a=e.output,o=e.title,i=e.theme,s=e.data,c=h(),v({responseFormat:r,chartType:n,data:s}),x({responseFormat:r},["file","url"]),x({chartType:n},["bar","pie","stacked"]),i&&x({theme:i},["light","dark"]),l="https://api.apyhub.com/generate/charts/"+n+"/"+r+"?output="+(null!=a?a:"output.png"),f=p({},o&&{title:o},i&&{theme:i[0].toUpperCase()+i.slice(1)},{data:s}),t.next=10,c.request("post",l,f);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(t){return J.apply(this,arguments)}function J(){return(J=s(u().mark((function t(e){var r,n,a,o,i,s,p,c,l;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.input,a=e.responseFormat,o=e.landscape,i=h(),v({input:n,responseFormat:a}),x({responseFormat:a},["file","url"]),p=(s=function(t){try{return!!new URL(t)}catch(t){return!1}})(n)?"webpage":"html-content",c=s(n)?"url":"content",l="https://api.apyhub.com/generate/"+p+"/pdf-"+a+"?&landscape="+(!0===o?"true":"false"),console.log(l),t.next=11,i.request("post",l,((r={})[c]=n,r));case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(t){return $.apply(this,arguments)}function $(){return($=s(u().mark((function t(e){var r,n,a,o,i,s,p,c,l,f,m,d,y,w,g;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.output,n=e.responseFormat,a=e.summary,o=e.description,i=e.organizerEmail,s=e.attendeesEmails,p=e.location,c=e.timeZone,l=e.startTime,f=e.endTime,m=e.meetingDate,d=e.recurring,y=e.recurrence,w=h(),v({responseFormat:n,summary:a,description:o,organizerEmail:i,attendeesEmails:s,timeZone:c,startTime:l,endTime:f,meetingDate:m}),x({responseFormat:n},["file","url"]),g="https://api.apyhub.com/generate/ical/"+n+"?output="+(null!=r?r:"invite.ics"),t.next=7,w.request("post",g,{summary:a,description:o,organizer_email:i,attendees_email:s,location:p,time_zone:c,start_time:l,end_time:f,meeting_date:m,recurring:d,recurrence:y});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function V(t){return X.apply(this,arguments)}function X(){return(X=s(u().mark((function t(e){var r,n,a,o,i,s,p,c,l;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.input,n=e.responseFormat,a=e.output,o=e.width,i=e.height,s=h(),v({input:r,responseFormat:n,width:o,height:i}),x({responseFormat:n},["file","url"]),p=P(r),c="","file"===p&&"file"===n?c="file":"file"===p&&"url"===n?c="file/url":"url"===p&&"file"===n?c="url/file":"url"===p&&"url"===n&&(c="file-urls"),l="https://api.apyhub.com/generate/image/thumbnail/"+c+"?output="+(null!=a?a:"thumbnail.png")+"&width="+o+"&height="+i,t.next=10,s.request("post",l,"file"===p?_(r,"image"):{url:r});case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var tt={__proto__:null,archive:G,barcode:I,qr:U,screenshot:Z,charts:W,pdf:H,ical:Y,thumbnail:V};function et(t){return rt.apply(this,arguments)}function rt(){return(rt=s(u().mark((function t(e){var r,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=h(),v({url:e}),n="https://api.apyhub.com/extract/text/webpage?url="+e,t.next=5,r.request("get",n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function nt(t){return at.apply(this,arguments)}function at(){return(at=s(u().mark((function t(e){var r,n,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=h(),v({word:e}),n="file"===P(e)?"file":"url",a="https://api.apyhub.com/extract/text/word-"+n,t.next=6,r.request("post",a,"file"===n?_(e,"file"):{url:e});case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ot(t){return ut.apply(this,arguments)}function ut(){return(ut=s(u().mark((function t(e){var r,n,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=h(),v({pdf:e}),n="file"===P(e)?"file":"url",a="https://api.apyhub.com/extract/text/pdf-"+n,t.next=6,r.request("post",a,"file"===n?_(e,"file"):{url:e});case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function it(t){return st.apply(this,arguments)}function st(){return(st=s(u().mark((function t(e){var r,n,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=h(),v({image:e}),n="file"===P(e)?"file":"file-urls",a="https://api.apyhub.com/processor/image/metadata/"+n,t.next=6,r.request("post",a,"file"===n?_(e,"image"):{url:e});case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pt(t){return ct.apply(this,arguments)}function ct(){return(ct=s(u().mark((function t(e){var r,n,a,o,i,s,p;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.input,n=e.password,a=h(),v({input:r}),o="file"===P(r)?"file":"url",i="https://api.apyhub.com/extract/"+(n?"secure-archive":"archive")+"/"+o+"/file-urls",s=function(){var t=_(r,"file");return n&&t.append("password",n),t},p="url"===o?{urls:r,password:null!=n?n:void 0}:s(),t.next=9,a.request("post",i,p);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var lt={__proto__:null,textFromWebpage:et,textFromWord:nt,textFromPdf:ot,imageMetadata:it,unarchive:pt};function ft(){return ht.apply(this,arguments)}function ht(){return(ht=s(u().mark((function t(){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=h(),t.next=4,e.request("get","https://api.apyhub.com/data/dictionary/country");case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mt(t){return dt.apply(this,arguments)}function dt(){return(dt=s(u().mark((function t(e){var r,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=h(),e){t.next=3;break}throw new Error("Missing country");case 3:return n="https://api.apyhub.com/data/info/country?country="+e,t.next=6,r.request("get",n);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function yt(t){return vt.apply(this,arguments)}function vt(){return(vt=s(u().mark((function t(e){var r,n,a,o,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.source,n=e.target,a=e.date,o=h(),v({source:r,target:n}),i={source:r.toLowerCase(),target:n.toLowerCase(),date:a},t.next=7,o.request("post","https://api.apyhub.com/data/convert/currency",i);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function xt(){return wt.apply(this,arguments)}function wt(){return(wt=s(u().mark((function t(){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=h(),t.next=4,e.request("get","https://api.apyhub.com/data/dictionary/currency");case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function gt(){return bt.apply(this,arguments)}function bt(){return(bt=s(u().mark((function t(){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=h(),t.next=4,e.request("get","https://api.apyhub.com/data/dictionary/timezone");case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var kt={__proto__:null,countries:ft,country:mt,currencyConverter:yt,currencyList:xt,timezones:gt};function Ft(t,e,r,n){return"file"===r&&"file"===n?t+"-file/"+e+"-file":"file"===r&&"url"===n?t+"-file/"+e+"-url":"url"===r&&"file"===n?t+"-url/"+e+"-file":"url"===r&&"url"===n?t+"-url/"+e+"-url":""}function qt(t){return _t.apply(this,arguments)}function _t(){return(_t=s(u().mark((function t(e){var r,n,a,o,i,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.input,n=e.responseFormat,a=e.output,o=h(),v({input:r,responseFormat:n}),x({responseFormat:n},["file","url"]),i=P(r),s="https://api.apyhub.com/convert/"+Ft("csv","excel",i,n)+"?output="+(null!=a?a:"output.xlsx"),t.next=8,o.request("post",s,"file"===i?_(r,"file"):{url:r});case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Lt(t){return Tt.apply(this,arguments)}function Tt(){return(Tt=s(u().mark((function t(e){var r,n,a,o,i,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.input,n=e.responseFormat,a=e.output,o=h(),v({input:r,responseFormat:n}),x({responseFormat:n},["file","url"]),i=P(r),s="https://api.apyhub.com/convert/"+Ft("html","pdf",i,n)+"?output="+(null!=a?a:"output.pdf"),t.next=8,o.request("post",s,"file"===i?_(r,"file"):{url:r});case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pt(t){return Et.apply(this,arguments)}function Et(){return(Et=s(u().mark((function t(e){var r,n,a,o,i,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.input,n=e.responseFormat,a=e.output,o=h(),v({input:r,responseFormat:n}),x({responseFormat:n},["file","url"]),i=P(r),s="https://api.apyhub.com/convert/"+Ft("image","pdf",i,n)+"?output="+(null!=a?a:"output.pdf"),t.next=8,o.request("post",s,"file"===i?_(r,"file"):{url:r});case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function St(t){return jt.apply(this,arguments)}function jt(){return(jt=s(u().mark((function t(e){var r,n,a,o,i,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.input,n=e.responseFormat,a=e.output,o=h(),v({input:r,responseFormat:n}),x({responseFormat:n},["file","url"]),i=P(r),s="https://api.apyhub.com/convert/"+Ft("md","html",i,n)+"?output="+(null!=a?a:"output.html"),t.next=8,o.request("post",s,"file"===i?_(r,"file"):{url:r});case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function zt(t){return Ot.apply(this,arguments)}function Ot(){return(Ot=s(u().mark((function t(e){var r,n,a,o,i,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.input,n=e.responseFormat,a=e.output,o=h(),v({input:r,responseFormat:n}),x({responseFormat:n},["file","url"]),i=P(r),s="https://api.apyhub.com/convert/"+Ft("presentation","pdf",i,n)+"?output="+(null!=a?a:"output.pdf"),t.next=8,o.request("post",s,"file"===i?_(r,"file"):{url:r});case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Bt(t){return At.apply(this,arguments)}function At(){return(At=s(u().mark((function t(e){var r,n,a,o,i,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.input,n=e.responseFormat,a=e.output,o=h(),v({input:r,responseFormat:n}),x({responseFormat:n},["file","url"]),i=P(r),s="https://api.apyhub.com/convert/"+Ft("spreadsheet","pdf",i,n)+"?output="+(null!=a?a:"output.pdf"),t.next=8,o.request("post",s,"file"===i?_(r,"file"):{url:r});case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ct(t){return Nt.apply(this,arguments)}function Nt(){return(Nt=s(u().mark((function t(e){var r,n,a,o,i,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.input,n=e.responseFormat,a=e.output,o=h(),v({input:r,responseFormat:n}),x({responseFormat:n},["file","url"]),i=P(r),s="https://api.apyhub.com/convert/"+Ft("word","pdf",i,n)+"?output="+(null!=a?a:"output.pdf"),t.next=8,o.request("post",s,"file"===i?_(r,"file"):{url:r});case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Gt={__proto__:null,csvToExcel:qt,htmlToPdf:Lt,imageToPdf:Pt,markdownToHtml:St,presentationToPdf:zt,spreadsheetToPdf:Bt,wordToPdf:Ct};function Rt(t){try{return!!new URL(t)}catch(t){return!1}}function It(){return(It=s(u().mark((function t(e,n){var o,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=Buffer.alloc(0),"string"!=typeof e){t.next=5;break}o=Buffer.from(e),t.next=37;break;case 5:if("object"!=typeof e||!e.data){t.next=28;break}if(!Rt(e.data)){t.next=17;break}return t.next=9,r(e.data);case 9:return i=t.sent,t.t0=Buffer,t.next=13,i.arrayBuffer();case 13:t.t1=t.sent,o=t.t0.from.call(t.t0,t.t1),t.next=26;break;case 17:if("string"!=typeof e.data){t.next=21;break}o=Buffer.from(e.data),t.next=26;break;case 21:if(!("data"in e)||"object"!=typeof e.data){t.next=25;break}o=Buffer.from(JSON.stringify(e.data)),t.next=26;break;case 25:throw new Error("Invalid data.data");case 26:t.next=37;break;case 28:if("object"!=typeof e||!e.type||"function"!=typeof e.arrayBuffer){t.next=36;break}return t.t2=Buffer,t.next=32,e.arrayBuffer();case 32:t.t3=t.sent,o=t.t2.from.call(t.t2,t.t3),t.next=37;break;case 36:throw new Error("Invalid data");case 37:a.writeFile(n,o,(function(t){if(t)throw t}));case 38:case"end":return t.stop()}}),t)})))).apply(this,arguments)}exports.archive=G,exports.barcode=I,exports.charts=W,exports.compress=O,exports.convert=Gt,exports.countries=ft,exports.country=mt,exports.crop=E,exports.csvToExcel=qt,exports.currencyConverter=yt,exports.currencyList=xt,exports.data=kt,exports.download=function(t,e){return It.apply(this,arguments)},exports.email=w,exports.extract=lt,exports.fuzzy=m,exports.generate=tt,exports.htmlToPdf=Lt,exports.ical=Y,exports.imageMetadata=it,exports.imageProcessor=N,exports.imageToPdf=Pt,exports.initApyhub=function(t,e){h(t,e)},exports.markdownToHtml=St,exports.pdf=H,exports.postcode=b,exports.presentationToPdf=zt,exports.qr=U,exports.resize=j,exports.screenshot=Z,exports.search=y,exports.spreadsheetToPdf=Bt,exports.textFromPdf=ot,exports.textFromWebpage=et,exports.textFromWord=nt,exports.thumbnail=V,exports.timezones=gt,exports.unarchive=pt,exports.validate=q,exports.watermark=A,exports.wordToPdf=Ct;
//# sourceMappingURL=apyhub.cjs.production.min.js.map
